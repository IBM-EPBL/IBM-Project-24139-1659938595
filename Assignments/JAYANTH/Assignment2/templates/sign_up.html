<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <script>
      function validateForm() {
        let name = document.forms["form"]["name"].value;
        let email = document.forms["form"]["email"].value;
        let password = document.forms["form"]["password"].value;

        if (validname(name) && validemail(email) && validpassword(password)) {
          return true;
        } else {
          return false;
        }
      }

      function validname(name) {
        document.getElementById("name").innerHTML = "";
        if (name != "") {
          var letters = /^[a-zA-Z ]*$/;
          if (name.match(letters)) {
            return true;
          } else {
            document.getElementById("name").innerHTML =
              "Name should contain only Alphabets";
            return false;
          }
        } else {
          document.getElementById("name").innerHTML =
            "Name should not be empty";
          return false;
        }
      }
      function validemail(email) {
        document.getElementById("email").innerHTML = "";
        if (email != "") {
          var emailfor = /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;
          if (email.match(emailfor)) {
            return true;
          } else {
            document.getElementById("email").innerHTML = "Invalid Email";
            return false;
          }
        } else {
          document.getElementById("email").innerHTML =
            "Email Should not be empty";
          return false;
        }
      }
      function validpassword(password) {
        console.log("hello" + password);
        document.getElementById("password").innerHTML = "";
        if (password != "") {
          var passwordfor =
            /^(?=.*\d)(?=.*[!@#$%^&*])(?=.*[a-z])(?=.*[A-Z]).{8,}$/;
          if (password.match(passwordfor)) {
            return true;
          } else {
            document.getElementById("password").innerHTML =
              "Password should  be > 8 letters, with at least a symbol, upper and lower case letters and a number ";
            return false;
          }
        } else {
          document.getElementById("password").innerHTML =
            "Passowrd Should not be empty";
          return false;
        }
      }
    </script>
    <title>Sign Up</title>
  </head>
  <body>
    <div class="row">
      <div class="col-sm-4"></div>
      <div class="col-sm-4 text-center mt-3">
        <form
          name="form"
          action="{{ url_for('add_user') }}"
          onsubmit="return validateForm()"
          method="post"
        >
          <img class="m-auto" src="lock.gif" alt="" width="25px" />
          <h5>Sign Up</h5>
          <div class="d-grid gap-4 mt-5">
            <input
              onkeyup="validname(this.value)"
              class="form-control text-center"
              type="text"
              name="name"
              id=""
              placeholder="Name"
              required
            />
            <label id="name" class="text-danger"></label>
            <input
              onkeyup="validemail(this.value)"
              class="form-control text-center"
              type="text"
              name="email"
              id=""
              placeholder="Email"
              required
            />
            <label id="email" class="text-danger"></label>
            <input
              onkeyup="validpassword(this.value)"
              class="form-control text-center"
              type="password"
              name="password"
              id=""
              placeholder="Password"
              required
            />
            <label id="password" class="text-danger"></label>
            <input
              class="form-control text-center"
              onfocus="(this.type='date')"
              onblur="(this.type='text')"
              type="text"
              name="dob"
              id=""
              placeholder="DOB"
              required
            />
            <label id="date"></label>
            <button class="btn btn-primary">Sign Up</button>
          </div>
        </form>
      </div>
      <div class="col-sm-4"></div>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
      crossorigin="anonymous"
    ></script>
  </body>
</html>
